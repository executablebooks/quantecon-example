

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>NumPy &#8212; Programming for Quantitative Economics  documentation</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link rel="stylesheet" href="../_static/jupyterbook.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link href="../_static/css/index.css" rel="stylesheet">
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <script src="../_static/print.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <script src="../_static/print.js"></script>
    <script >var togglebuttonSelector = '.toggle, .secondtoggle, .tag_hide_input div.cell_input, .tag_hide_output div.cell_output, .tag_hide_cell.cell';</script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Matplotlib" href="matplotlib.html" />
    <link rel="prev" title="Python for Scientific Computing" href="need_for_speed.html" />


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script>
var css_paths = [
    "../_static/css/index.css",
    "../_static/copybutton.css",
    "../_static/jupyterbook.css",
    "../_static/mystnb.css",
    "../_static/pygments.css",
    "../_static/togglebutton.css",
    "../_static/bootstrap.min.css"
]
</script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
<div class='top'>
<button id="navbar-toggler" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#site-navigation" aria-controls="navbar-menu" aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation">
    <i class="fas fa-bars"></i>
    <i class="fas fa-arrow-left"></i>
    <i class="fas fa-arrow-up"></i>
</button>
</div>

    <div class="container-fluid">
      <div class="row">
          
<div class="col-12 col-md-3 col-xl-3 bd-sidebar show" id="site-navigation">
<div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/qe-logo-large.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Programming for Quantitative Economics  documentation</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
  <li class="">
    <a href="index_learning_python.html">Intro to Python</a>
  </li>
  <li class="active">
    <a href="index_python_scientific_libraries.html">The Scientific Libraries</a>
  <ul class="nav sidenav_l2">
    <li class="">
      <a href="need_for_speed.html">Python for Scientific Computing</a>
    </li>
    <li class="active">
      <a href="">NumPy</a>
    </li>
    <li class="">
      <a href="matplotlib.html">Matplotlib</a>
    </li>
    <li class="">
      <a href="scipy.html">SciPy</a>
    </li>
    <li class="">
      <a href="numba.html">Numba</a>
    </li>
    <li class="">
      <a href="parallelization.html">Parallelization</a>
    </li>
    <li class="">
      <a href="pandas.html">Pandas</a>
    </li>
  </ul>
  </li>
  <li class="">
    <a href="index_advanced_python_programming.html">Advanced Python Programming</a>
  </li>
  <li class="">
    <a href="troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
</nav>
<p class="sidebar_footer">Powered by <a href='https://jupyterbook.org'>Jupyter Book</a></p>
</div>

          
<div class="d-none d-xl-block col-xl-2 bd-toc">


<div class="tocsection onthispage"><i class="fas fa-list"></i> On this page</div>
<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#overview" class="nav-link">Overview</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#references" class="nav-link">References</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#numpy-arrays" class="nav-link">NumPy Arrays</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#shape-and-dimension" class="nav-link">Shape and Dimension</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#id1" class="nav-link">Creating Arrays</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#array-indexing" class="nav-link">Array Indexing</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#array-methods" class="nav-link">Array Methods</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#operations-on-arrays" class="nav-link">Operations on Arrays</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#arithmetic-operations" class="nav-link">Arithmetic Operations</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#matrix-multiplication" class="nav-link">Matrix Multiplication</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#mutability-and-copying-arrays" class="nav-link">Mutability and Copying Arrays</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#making-copies" class="nav-link">Making Copies</a>
        </li>
    
            </ul>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#additional-functionality" class="nav-link">Additional Functionality</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#vectorized-functions" class="nav-link">Vectorized Functions</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#comparisons" class="nav-link">Comparisons</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#sub-packages" class="nav-link">Sub-packages</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#exercises" class="nav-link">Exercises</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#exercise-1" class="nav-link">Exercise 1</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#exercise-2" class="nav-link">Exercise 2</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#exercise-3" class="nav-link">Exercise 3</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#solutions" class="nav-link">Solutions</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#id2" class="nav-link">Exercise 1</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#id3" class="nav-link">Exercise 2</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#id4" class="nav-link">Exercise 3</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>

</div>


          
<main class="col py-md-3 pl-md-5 pr-0 bd-content overflow-auto" role="main">
    
    <div class="row topbar sticky-top">
    <button id="navbar-toggler" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#site-navigation" aria-controls="navbar-menu" aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation">
        <i class="fas fa-bars"></i>
        <i class="fas fa-arrow-left"></i>
    </button>
    <div class="download-buttons-dropdown">
        <button id="dropdown-button-trigger" class="btn btn-secondary topbarbtn"><i class="fas fa-download"></i></button>
        <div class="download-buttons">
            <!-- Download raw file -->
            <a class="download-buttons" href="../_sources/docs/numpy.md.txt"><button type="button" class="btn btn-secondary topbarbtn">.md</button></a>
            <!-- Download PDF via PrintJS -->
            <button type="button" id="download-print" class="btn btn-secondary topbarbtn">.pdf</button>
        </div>
    </div>
    
</div>
    <div id="main-content" class="row">
        <div class="col-12 ">
        
              <div>
                
  <div class="section" id="numpy">
<h1><span class="target" id="np"></span>NumPy<a class="headerlink" href="#numpy" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>“Let’s be clear: the work of science has nothing whatever to do with
consensus. Consensus is the business of politics. Science, on the
contrary, requires only one investigator who happens to be right,
which means that he or she has results that are verifiable by
reference to the real world. In science consensus is irrelevant. What
is relevant is reproducible results.” – Michael Crichton</p>
</div></blockquote>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/NumPy">NumPy</a> is a first-rate library for
numerical programming</p>
<ul class="simple">
<li><p>Widely used in academia, finance and industry.</p></li>
<li><p>Mature, fast, stable and under continuous development.</p></li>
</ul>
<p>We have already seen some code involving NumPy in the preceding
lectures.</p>
<p>In this lecture, we will start a more systematic discussion of both</p>
<ul class="simple">
<li><p>NumPy arrays and</p></li>
<li><p>the fundamental array processing operations provided by NumPy.</p></li>
</ul>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/">The official NumPy documentation</a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="numpy-arrays">
<h2><span class="target" id="numpy-array"></span>NumPy Arrays<a class="headerlink" href="#numpy-arrays" title="Permalink to this headline">¶</a></h2>
<p>The essential problem that NumPy solves is fast array processing.</p>
<p>The most important structure that NumPy defines is an array data type
formally called a
<a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html">numpy.ndarray</a>.</p>
<p>NumPy arrays power a large proportion of the scientific Python
ecosystem.</p>
<p>Let’s first import the library.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>To create a NumPy array containing only zeros we use
<a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.zeros.html#numpy.zeros">np.zeros</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>NumPy arrays are somewhat like native Python lists, except that</p>
<ul class="simple">
<li><p>Data <em>must be homogeneous</em> (all elements of the same type).</p></li>
<li><p>These types must be one of the <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html">data
types</a>
(<code class="docutils literal notranslate"><span class="pre">dtypes</span></code>) provided by NumPy.</p></li>
</ul>
<p>The most important of these dtypes are:</p>
<ul class="simple">
<li><p>float64: 64 bit floating-point number</p></li>
<li><p>int64: 64 bit integer</p></li>
<li><p>bool: 8 bit True or False</p></li>
</ul>
<p>There are also dtypes to represent complex numbers, unsigned integers,
etc.</p>
<p>On modern machines, the default dtype for arrays is <code class="docutils literal notranslate"><span class="pre">float64</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>If we want to use integers we can specify as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<div class="section" id="shape-and-dimension">
<h3><span class="target" id="numpy-shape-dim"></span>Shape and Dimension<a class="headerlink" href="#shape-and-dimension" title="Permalink to this headline">¶</a></h3>
<p>Consider the following assignment</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">z</span></code> is a <em>flat</em> array with no dimension — neither row nor
column vector.</p>
<p>The dimension is recorded in the <code class="docutils literal notranslate"><span class="pre">shape</span></code> attribute, which is a tuple</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<p>Here the shape tuple has only one element, which is the length of the
array (tuples with one element end with a comma).</p>
<p>To give it dimension, we can change the <code class="docutils literal notranslate"><span class="pre">shape</span></code> attribute</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">z</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<p>In the last case, to make the 2 by 2 array, we could also pass a tuple
to the <code class="docutils literal notranslate"><span class="pre">zeros()</span></code> function, as in <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">np.zeros((2,</span> <span class="pre">2))</span></code>.</p>
</div>
<div class="section" id="id1">
<h3><span class="target" id="creating-arrays"></span>Creating Arrays<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>As we’ve seen, the <code class="docutils literal notranslate"><span class="pre">np.zeros</span></code> function creates an array of zeros.</p>
<p>You can probably guess what <code class="docutils literal notranslate"><span class="pre">np.ones</span></code> creates.</p>
<p>Related is <code class="docutils literal notranslate"><span class="pre">np.empty</span></code>, which creates arrays in memory that can later be
populated with data</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<p>The numbers you see here are garbage values.</p>
<p>(Python allocates 3 contiguous 64 bit pieces of memory, and the existing
contents of those memory slots are interpreted as <code class="docutils literal notranslate"><span class="pre">float64</span></code> values)</p>
<p>To set up a grid of evenly spaced numbers use <code class="docutils literal notranslate"><span class="pre">np.linspace</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># From 2 to 4, with 5 elements</span>
</pre></div>
</div>
<p>To create an identity matrix use either <code class="docutils literal notranslate"><span class="pre">np.identity</span></code> or <code class="docutils literal notranslate"><span class="pre">np.eye</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<p>In addition, NumPy arrays can be created from Python lists, tuples, etc.
using <code class="docutils literal notranslate"><span class="pre">np.array</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>                 <span class="c1"># ndarray from Python list</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>    <span class="c1"># Here &#39;float&#39; is equivalent to &#39;np.float64&#39;</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>         <span class="c1"># 2D array from a list of lists</span>
<span class="n">z</span>
</pre></div>
</div>
<p>See also <code class="docutils literal notranslate"><span class="pre">np.asarray</span></code>, which performs a similar function, but does not
make a distinct copy of data already in a NumPy array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">na</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">na</span> <span class="ow">is</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">na</span><span class="p">)</span>   <span class="c1"># Does not copy NumPy arrays</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">na</span> <span class="ow">is</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">na</span><span class="p">)</span>     <span class="c1"># Does make a new copy --- perhaps unnecessarily</span>
</pre></div>
</div>
<p>To read in the array data from a text file containing numeric data use
<code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> or <code class="docutils literal notranslate"><span class="pre">np.genfromtxt</span></code>—see <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/routines.io.html">the
documentation</a>
for details.</p>
</div>
<div class="section" id="array-indexing">
<h3>Array Indexing<a class="headerlink" href="#array-indexing" title="Permalink to this headline">¶</a></h3>
<p>For a flat array, indexing is the same as Python sequences:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># Two elements, starting at element 0</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>For 2D arrays the index syntax is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>And so on.</p>
<p>Note that indices are still zero-based, to maintain compatibility with
Python sequences.</p>
<p>Columns and rows can be extracted as follows</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>NumPy arrays of integers can also be used to extract elements</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">z</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
</pre></div>
</div>
<p>Finally, an array of <code class="docutils literal notranslate"><span class="pre">dtype</span> <span class="pre">bool</span></code> can be used to extract elements</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="n">d</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="n">d</span><span class="p">]</span>
</pre></div>
</div>
<p>We’ll see why this is useful below.</p>
<p>An aside: all elements of an array can be set equal to one number using
slice notation</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">z</span>
</pre></div>
</div>
</div>
<div class="section" id="array-methods">
<h3>Array Methods<a class="headerlink" href="#array-methods" title="Permalink to this headline">¶</a></h3>
<p>Arrays have useful methods, all of which are carefully optimized</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>              <span class="c1"># Sorts a in place</span>
<span class="n">a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>               <span class="c1"># Sum</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>              <span class="c1"># Mean</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>               <span class="c1"># Max</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>            <span class="c1"># Returns the index of the maximal element</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>            <span class="c1"># Cumulative sum of the elements of a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">cumprod</span><span class="p">()</span>           <span class="c1"># Cumulative product of the elements of a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">var</span><span class="p">()</span>               <span class="c1"># Variance</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>               <span class="c1"># Standard deviation</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">T</span>                   <span class="c1"># Equivalent to a.transpose()</span>
</pre></div>
</div>
<p>Another method worth knowing is <code class="docutils literal notranslate"><span class="pre">searchsorted()</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">z</span></code> is a nondecreasing array, then <code class="docutils literal notranslate"><span class="pre">z.searchsorted(a)</span></code> returns the
index of the first element of <code class="docutils literal notranslate"><span class="pre">z</span></code> that is <code class="docutils literal notranslate"><span class="pre">&gt;=</span> <span class="pre">a</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="mf">2.2</span><span class="p">)</span>
</pre></div>
</div>
<p>Many of the methods discussed above have equivalent functions in the
NumPy namespace</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="operations-on-arrays">
<h2>Operations on Arrays<a class="headerlink" href="#operations-on-arrays" title="Permalink to this headline">¶</a></h2>
<div class="section" id="arithmetic-operations">
<h3>Arithmetic Operations<a class="headerlink" href="#arithmetic-operations" title="Permalink to this headline">¶</a></h3>
<p>The operators <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code> and <code class="docutils literal notranslate"><span class="pre">**</span></code> all act <em>elementwise</em> on
arrays</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
<span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
</pre></div>
</div>
<p>We can add a scalar to each element as follows</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">+</span> <span class="mi">10</span>
</pre></div>
</div>
<p>Scalar multiplication is similar</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">*</span> <span class="mi">10</span>
</pre></div>
</div>
<p>The two-dimensional arrays follow the same general rules</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">A</span> <span class="o">+</span> <span class="n">B</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">+</span> <span class="mi">10</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">*</span> <span class="n">B</span>
</pre></div>
</div>
<p id="numpy-matrix-multiplication">In particular, <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">*</span> <span class="pre">B</span></code> is <em>not</em> the matrix product, it is an
element-wise product.</p>
</div>
<div class="section" id="matrix-multiplication">
<h3>Matrix Multiplication<a class="headerlink" href="#matrix-multiplication" title="Permalink to this headline">¶</a></h3>
<p>With Anaconda’s scientific Python package based around Python 3.5 and
above, one can use the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> symbol for matrix multiplication, as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">A</span> <span class="o">@</span> <span class="n">B</span>
</pre></div>
</div>
<p>(For older versions of Python and NumPy you need to use the
<a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html">np.dot</a>
function)</p>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> to take the inner product of two flat arrays</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">A</span> <span class="o">@</span> <span class="n">B</span>
</pre></div>
</div>
<p>In fact, we can use <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> when one element is a Python list or tuple</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
<span class="n">A</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">@</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Since we are post-multiplying, the tuple is treated as a column vector.</p>
</div>
<div class="section" id="mutability-and-copying-arrays">
<h3>Mutability and Copying Arrays<a class="headerlink" href="#mutability-and-copying-arrays" title="Permalink to this headline">¶</a></h3>
<p>NumPy arrays are mutable data types, like Python lists.</p>
<p>In other words, their contents can be altered (mutated) in memory after
initialization.</p>
<p>We already saw examples above.</p>
<p>Here’s another example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">42</span><span class="p">,</span> <span class="mi">44</span><span class="p">])</span>
<span class="n">a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Change last element to 0</span>
<span class="n">a</span>
</pre></div>
</div>
<p>Mutability leads to the following behavior (which can be shocking to
MATLAB programmers…)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">a</span>
</pre></div>
</div>
<p>What’s happened is that we have changed <code class="docutils literal notranslate"><span class="pre">a</span></code> by changing <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<p>The name <code class="docutils literal notranslate"><span class="pre">b</span></code> is bound to <code class="docutils literal notranslate"><span class="pre">a</span></code> and becomes just another reference to the
array (the Python assignment model is described in more detail
<a class="reference internal" href="python_advanced_features.html#python-advanced-features"><span class="std std-ref">later in the course</span></a>).</p>
<p>Hence, it has equal rights to make changes to that array.</p>
<p>This is in fact the most sensible default behavior!</p>
<p>It means that we pass around only pointers to data, rather than making
copies.</p>
<p>Making copies is expensive in terms of both speed and memory.</p>
<div class="section" id="making-copies">
<h4>Making Copies<a class="headerlink" href="#making-copies" title="Permalink to this headline">¶</a></h4>
<p>It is of course possible to make <code class="docutils literal notranslate"><span class="pre">b</span></code> an independent copy of <code class="docutils literal notranslate"><span class="pre">a</span></code> when
required.</p>
<p>This can be done using <code class="docutils literal notranslate"><span class="pre">np.copy</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span>
</pre></div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">b</span></code> is an independent copy (called a <em>deep copy</em>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>
</pre></div>
</div>
<p>Note that the change to <code class="docutils literal notranslate"><span class="pre">b</span></code> has not affected <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="additional-functionality">
<h2>Additional Functionality<a class="headerlink" href="#additional-functionality" title="Permalink to this headline">¶</a></h2>
<p>Let’s look at some other useful things we can do with NumPy.</p>
<div class="section" id="vectorized-functions">
<h3>Vectorized Functions<a class="headerlink" href="#vectorized-functions" title="Permalink to this headline">¶</a></h3>
<p>NumPy provides versions of the standard functions <code class="docutils literal notranslate"><span class="pre">log</span></code>, <code class="docutils literal notranslate"><span class="pre">exp</span></code>, <code class="docutils literal notranslate"><span class="pre">sin</span></code>,
etc. that act <em>element-wise</em> on arrays</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>This eliminates the need for explicit element-by-element loops such as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
<p>Because they act element-wise on arrays, these functions are called
<em>vectorized functions</em>.</p>
<p>In NumPy-speak, they are also called <em>ufuncs</em>, which stands for
“universal functions”.</p>
<p>As we saw above, the usual arithmetic operations (<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, etc.) also
work element-wise, and combining these with the ufuncs gives a very
large set of fast element-wise functions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">z</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Not all user-defined functions will act element-wise.</p>
<p>For example, passing the function <code class="docutils literal notranslate"><span class="pre">f</span></code> defined below a NumPy array causes
a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The NumPy function <code class="docutils literal notranslate"><span class="pre">np.where</span></code> provides a vectorized alternative:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">x</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Insert 1 if x &gt; 0 true, otherwise 0</span>
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">np.vectorize</span></code> to vectorize a given function</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                <span class="c1"># Passing the same vector x as in the previous example</span>
</pre></div>
</div>
<p>However, this approach doesn’t always obtain the same speed as a more
carefully crafted vectorized function.</p>
</div>
<div class="section" id="comparisons">
<h3>Comparisons<a class="headerlink" href="#comparisons" title="Permalink to this headline">¶</a></h3>
<p>As a rule, comparisons on arrays are done element-wise</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">z</span> <span class="o">==</span> <span class="n">y</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">z</span> <span class="o">==</span> <span class="n">y</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">!=</span> <span class="n">y</span>
</pre></div>
</div>
<p>The situation is similar for <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>.</p>
<p>We can also do comparisons against scalars</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">&gt;</span> <span class="mi">3</span>
</pre></div>
</div>
<p>This is particularly useful for <em>conditional extraction</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mi">3</span>
<span class="n">b</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<p>Of course we can—and frequently do—perform this in one step</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="n">z</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="sub-packages">
<h3>Sub-packages<a class="headerlink" href="#sub-packages" title="Permalink to this headline">¶</a></h3>
<p>NumPy provides some additional functionality related to scientific
programming through its sub-packages.</p>
<p>We’ve already seen how we can generate random variables using
<code class="docutils literal notranslate"><span class="pre">np.random</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>  <span class="c1"># Generate standard normals</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>    <span class="c1"># 1,000 draws from Bin(10, 0.5)</span>
<span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
<p>Another commonly used subpackage is <code class="docutils literal notranslate"><span class="pre">np.linalg</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>

<span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>           <span class="c1"># Compute the determinant</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>           <span class="c1"># Compute the inverse</span>
</pre></div>
</div>
<p>Much of this functionality is also available in
<a class="reference external" href="http://www.scipy.org/">SciPy</a>, a collection of modules that are built
on top of NumPy.</p>
<p>We’ll cover the SciPy versions in more detail
<a class="reference internal" href="scipy.html"><span class="doc">soon</span></a>.</p>
<p>For a comprehensive list of what’s available in NumPy see <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/routines.html">this
documentation</a>.</p>
</div>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<div class="section" id="exercise-1">
<h3><span class="target" id="np-ex1"></span>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this headline">¶</a></h3>
<p>Consider the polynomial expression</p>
<div class="math notranslate nohighlight" id="equation-np-polynom">
<span class="eqno">(6)<a class="headerlink" href="#equation-np-polynom" title="Permalink to this equation">¶</a></span>\[p(x) = a_0 + a_1 x + a_2 x^2 + \cdots a_N x^N = \sum_{n=0}^N a_n x^n\]</div>
<p><a class="reference internal" href="python_essentials.html#pyess-ex2"><span class="std std-ref">Earlier</span></a>, you wrote a simple
function <code class="docutils literal notranslate"><span class="pre">p(x,</span> <span class="pre">coeff)</span></code> to evaluate <a class="reference internal" href="#equation-np-polynom">(6)</a> without considering efficiency.</p>
<p>Now write a new function that does the same job, but uses NumPy arrays
and array operations for its computations, rather than any form of
Python loop.</p>
<p>(Such functionality is already implemented as <code class="docutils literal notranslate"><span class="pre">np.poly1d</span></code>, but for the
sake of the exercise don’t use this class)</p>
<ul class="simple">
<li><p>Hint: Use <code class="docutils literal notranslate"><span class="pre">np.cumprod()</span></code></p></li>
</ul>
</div>
<div class="section" id="exercise-2">
<h3><span class="target" id="np-ex2"></span>Exercise 2<a class="headerlink" href="#exercise-2" title="Permalink to this headline">¶</a></h3>
<p>Let <code class="docutils literal notranslate"><span class="pre">q</span></code> be a NumPy array of length <code class="docutils literal notranslate"><span class="pre">n</span></code> with <code class="docutils literal notranslate"><span class="pre">q.sum()</span> <span class="pre">==</span> <span class="pre">1</span></code>.</p>
<p>Suppose that <code class="docutils literal notranslate"><span class="pre">q</span></code> represents a <a class="reference external" href="https://en.wikipedia.org/wiki/Probability_mass_function">probability mass
function</a>.</p>
<p>We wish to generate a discrete random variable <span class="math notranslate nohighlight">\(x\)</span> such that
<span class="math notranslate nohighlight">\(\mathbb P\{x = i\} = q_i\)</span>.</p>
<p>In other words, <code class="docutils literal notranslate"><span class="pre">x</span></code> takes values in <code class="docutils literal notranslate"><span class="pre">range(len(q))</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">i</span></code> with
probability <code class="docutils literal notranslate"><span class="pre">q[i]</span></code>.</p>
<p>The standard (inverse transform) algorithm is as follows:</p>
<ul class="simple">
<li><p>Divide the unit interval <span class="math notranslate nohighlight">\([0, 1]\)</span> into <span class="math notranslate nohighlight">\(n\)</span> subintervals <span class="math notranslate nohighlight">\(I_0, I_1, \ldots, I_{n-1}\)</span> such that the length of <span class="math notranslate nohighlight">\(I_i\)</span> is <span class="math notranslate nohighlight">\(q_i\)</span>.</p></li>
<li><p>Draw a uniform random variable <span class="math notranslate nohighlight">\(U\)</span> on <span class="math notranslate nohighlight">\([0, 1]\)</span> and return the <span class="math notranslate nohighlight">\(i\)</span> such that <span class="math notranslate nohighlight">\(U \in I_i\)</span>.</p></li>
</ul>
<p>The probability of drawing <span class="math notranslate nohighlight">\(i\)</span> is the length of <span class="math notranslate nohighlight">\(I_i\)</span>, which is equal to
<span class="math notranslate nohighlight">\(q_i\)</span>.</p>
<p>We can implement the algorithm as follows</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">uniform</span>

<span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">U</span> <span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">U</span> <span class="o">&lt;=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">i</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</pre></div>
</div>
<p>If you can’t see how this works, try thinking through the flow for a
simple example, such as <code class="docutils literal notranslate"><span class="pre">q</span> <span class="pre">=</span> <span class="pre">[0.25,</span> <span class="pre">0.75]</span></code> It helps to sketch the
intervals on paper.</p>
<p>Your exercise is to speed it up using NumPy, avoiding explicit loops</p>
<ul class="simple">
<li><p>Hint: Use <code class="docutils literal notranslate"><span class="pre">np.searchsorted</span></code> and <code class="docutils literal notranslate"><span class="pre">np.cumsum</span></code></p></li>
</ul>
<p>If you can, implement the functionality as a class called <code class="docutils literal notranslate"><span class="pre">DiscreteRV</span></code>,
where</p>
<ul class="simple">
<li><p>the data for an instance of the class is the vector of probabilities
<code class="docutils literal notranslate"><span class="pre">q</span></code></p></li>
<li><p>the class has a <code class="docutils literal notranslate"><span class="pre">draw()</span></code> method, which returns one draw according to
the algorithm described above</p></li>
</ul>
<p>If you can, write the method so that <code class="docutils literal notranslate"><span class="pre">draw(k)</span></code> returns <code class="docutils literal notranslate"><span class="pre">k</span></code> draws from
<code class="docutils literal notranslate"><span class="pre">q</span></code>.</p>
</div>
<div class="section" id="exercise-3">
<h3><span class="target" id="np-ex3"></span>Exercise 3<a class="headerlink" href="#exercise-3" title="Permalink to this headline">¶</a></h3>
<p>Recall our <a class="reference internal" href="python_oop.html#oop-ex1"><span class="std std-ref">earlier discussion</span></a>
of the empirical cumulative distribution function.</p>
<p>Your task is to</p>
<ol class="simple">
<li><p>Make the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method more efficient using NumPy.</p></li>
<li><p>Add a method that plots the ECDF over <span class="math notranslate nohighlight">\([a, b]\)</span>, where <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(b\)</span>
are method parameters.</p></li>
</ol>
</div>
</div>
<div class="section" id="solutions">
<h2>Solutions<a class="headerlink" href="#solutions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
<div class="section" id="id2">
<h3>Exercise 1<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>This code does the job</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">p</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">coef</span><span class="p">):</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">coef</span><span class="p">)</span>
    <span class="n">X</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumprod</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>   <span class="c1"># y = [1, x, x**2,...]</span>
    <span class="k">return</span> <span class="n">coef</span> <span class="o">@</span> <span class="n">y</span>
</pre></div>
</div>
<p>Let’s test it</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">coef</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">coef</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">coef</span><span class="p">))</span>
<span class="c1"># For comparison</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">coef</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>Exercise 2<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Here’s our first pass at a solution:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">cumsum</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">uniform</span>

<span class="k">class</span> <span class="nc">DiscreteRV</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates an array of draws from a discrete random variable with vector of</span>
<span class="sd">    probabilities given by q.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The argument q is a NumPy array, or array like, nonnegative and sums</span>
<span class="sd">        to 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">cumsum</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns k draws from q. For each such draw, the value i is returned</span>
<span class="sd">        with probability q[i].</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Q</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">k</span><span class="p">))</span>
</pre></div>
</div>
<p>The logic is not obvious, but if you take your time and read it slowly,
you will understand.</p>
<p>There is a problem here, however.</p>
<p>Suppose that <code class="docutils literal notranslate"><span class="pre">q</span></code> is altered after an instance of <code class="docutils literal notranslate"><span class="pre">discreteRV</span></code> is
created, for example by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">DiscreteRV</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>The problem is that <code class="docutils literal notranslate"><span class="pre">Q</span></code> does not change accordingly, and <code class="docutils literal notranslate"><span class="pre">Q</span></code> is the data
used in the <code class="docutils literal notranslate"><span class="pre">draw</span></code> method.</p>
<p>To deal with this, one option is to compute <code class="docutils literal notranslate"><span class="pre">Q</span></code> every time the draw
method is called.</p>
<p>But this is inefficient relative to computing <code class="docutils literal notranslate"><span class="pre">Q</span></code> once-off.</p>
<p>A better option is to use descriptors.</p>
<p>A solution from the <a class="reference external" href="https://github.com/QuantEcon/QuantEcon.py/tree/master/quantecon">quantecon library</a>
using descriptors that behaves as we desire can be found
<a class="reference external" href="https://github.com/QuantEcon/QuantEcon.py/blob/master/quantecon/discrete_rv.py">here</a>.</p>
</div>
<div class="section" id="id4">
<h3>Exercise 3<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>An example solution is given below.</p>
<p>In essence, we’ve just taken <a class="reference external" href="https://github.com/QuantEcon/QuantEcon.py/blob/master/quantecon/ecdf.py">this code</a>
from QuantEcon and added in a plot method</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Modifies ecdf.py from QuantEcon to add in a plot method</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">ECDF</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    One-dimensional empirical distribution function given a vector of</span>
<span class="sd">    observations.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    observations : array_like</span>
<span class="sd">        An array of observations</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    observations : array_like</span>
<span class="sd">        An array of observations</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observations</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">observations</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluates the ecdf at x</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x : scalar(float)</span>
<span class="sd">            The x at which the ecdf is evaluated</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        scalar(float)</span>
<span class="sd">            Fraction of the sample less than x</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">observations</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot the ecdf on the interval [a, b].</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        a : scalar(float), optional(default=None)</span>
<span class="sd">            Lower endpoint of the plot interval</span>
<span class="sd">        b : scalar(float), optional(default=None)</span>
<span class="sd">            Upper endpoint of the plot interval</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># === choose reasonable interval if [a, b] not specified === #</span>
        <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">observations</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">observations</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">observations</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">observations</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

        <span class="c1"># === generate plot === #</span>
        <span class="n">x_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__call__</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">x_vals</span><span class="p">))</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Here’s an example of usage</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">F</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="need_for_speed.html" title="previous page">Python for Scientific Computing</a>
    <a class='right-next' id="next-link" href="matplotlib.html" title="next page">Matplotlib</a>

    </div>
    <footer class="footer">
  <div class="container">
    <p>
          &copy; Copyright .<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>